# 🎥 视频录制软件 (Gradio版本)

一个基于 Gradio 框架开发的现代化视频录制工具，支持摄像头选择、实时预览、镜像显示和高质量MP4录制。

## ✨ 主要功能

- **🎛️ 摄像头选择**: 自动检测并支持多个摄像头设备
- **📹 实时预览**: 30fps流畅预览，支持镜像显示
- **🔴 一键录制**: 开始录制同时开启预览，结束录制同时关闭预览
- **📁 智能保存**: 自动保存到 `VIDEO_MP4` 目录，时间戳命名
- **🎨 美观界面**: 现代化UI设计，响应式布局

## 🚀 快速开始

### 1. 环境要求

- **操作系统**: Windows 10/11, macOS, Linux
- **Python版本**: Python 3.8 或更高版本
- **内存**: 建议 4GB 以上
- **摄像头**: 支持 USB 摄像头或内置摄像头

### 2. 安装依赖

#### 方法一：使用 requirements.txt (推荐)

```bash
# 克隆或下载项目
git clone <your-repo-url>
cd video_recorder

# 创建虚拟环境 (可选但推荐)
python -m venv venv
# Windows
venv\Scripts\activate
# macOS/Linux
source venv/bin/activate

# 安装依赖
pip install -r requirements.txt
```

#### 方法二：手动安装

```bash
pip install gradio==4.44.0
pip install opencv-python==4.8.1.78
pip install numpy==1.24.3
```

### 3. 运行程序

```bash
python app.py
```

程序将在浏览器中自动打开，默认地址：`http://localhost:7860`

## 📖 使用指南

### 基本操作流程

1. **启动程序**: 运行 `python app.py`
2. **选择摄像头**: 从下拉菜单选择要使用的摄像头设备
3. **设置镜像**: 勾选"预览镜像"选项（仅影响显示，不影响保存）
4. **开始录制**: 点击"🔴 开始录制（含预览）"按钮
   - 自动开启摄像头预览
   - 开始录制MP4视频
   - 实时显示录制状态
5. **结束录制**: 点击"⏹️ 结束录制（含预览）"按钮
   - 停止录制并保存视频
   - 关闭摄像头预览
   - 显示保存文件路径

### 界面说明

- **🎛️ 控制面板**: 包含摄像头选择、镜像设置和控制按钮
- **📹 实时预览**: 显示摄像头实时画面
- **状态显示**: 实时显示当前录制状态和文件信息

### 文件保存

- **保存目录**: `VIDEO_MP4/` (自动创建)
- **文件格式**: MP4
- **帧率**: 30fps
- **命名规则**: `video_YYYY_MM_DD_HH_MM_SS.mp4`
- **示例**: `video_2025_08_06_16_37_22.mp4`

## 🔧 技术特性

- **多线程架构**: 预览和录制使用独立线程，互不干扰
- **OpenCV集成**: 基于OpenCV实现高质量视频处理
- **Gradio框架**: 现代化Web界面，支持响应式设计
- **自动目录管理**: 自动创建保存目录
- **错误处理**: 完善的异常处理和用户提示

## 📋 依赖库版本说明

### 核心依赖

| 库名 | 版本 | 说明 | 兼容性 |
|------|------|------|--------|
| **gradio** | 4.44.0 | Web界面框架 | Python 3.8+ |
| **opencv-python** | 4.8.1.78 | 计算机视觉库 | Python 3.8+ |
| **numpy** | 1.24.3 | 数值计算库 | Python 3.8+ |

### 系统依赖

- **Windows**: 无需额外安装
- **macOS**: 可能需要安装 Xcode Command Line Tools
- **Linux**: 可能需要安装 `libgl1-mesa-glx` 等OpenGL库

### 版本兼容性

- **Gradio 4.x**: 完全兼容，推荐使用
- **Gradio 3.x**: 部分兼容，可能需要调整代码
- **Python 3.8-3.12**: 完全兼容
- **Python 3.7**: 不兼容

## 🐛 常见问题

### Q: 无法检测到摄像头？
**A**: 请检查：
1. 摄像头是否正确连接
2. 是否有其他程序占用摄像头
3. 摄像头驱动是否正确安装
4. 尝试重新插拔USB摄像头

### Q: 录制视频无法播放？
**A**: 确保：
1. 系统安装了支持MP4格式的视频播放器
2. 视频文件完整下载
3. 检查 `VIDEO_MP4` 目录权限

### Q: 预览画面卡顿？
**A**: 可能原因：
1. 设备性能不足
2. 其他程序占用资源
3. 摄像头分辨率过高
4. 网络带宽限制

### Q: 程序启动失败？
**A**: 检查：
1. Python版本是否符合要求
2. 依赖库是否正确安装
3. 端口7860是否被占用
4. 防火墙设置

## 🔒 安全说明

- 程序仅在本地运行，不收集任何用户数据
- 录制的视频文件保存在本地，不会上传到任何服务器
- 摄像头访问权限由操作系统控制

## 📝 更新日志

### v1.0.0 (2025-08-12)
- ✨ 初始版本发布
- 🎥 支持摄像头选择和实时预览
- 🔴 一键开始/结束录制功能
- 📁 自动保存到指定目录
- 🎨 美观的Gradio界面

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 📞 技术支持

如果遇到问题，请：

1. 查看本文档的常见问题部分
2. 检查依赖库版本是否正确
3. 在 GitHub Issues 中搜索类似问题
4. 创建新的 Issue 描述问题

---

**享受录制美好时光！** ��✨

*最后更新: 2025年8月*